window.log=function(){log.history=log.history||[];log.history.push(arguments);arguments.callee=arguments.callee.caller;if(this.console){console.log(Array.prototype.slice.call(arguments))}};(function(e){function h(){}for(var g="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),f;f=g.pop();){e[f]=e[f]||h}})(window.console=window.console||{});
/*
 *Amplify Store - Persistent Client-Side Storage @VERSION
 *
 * Copyright 2011 appendTo LLC. (http://appendto.com/team)
 * Dual licensed under the MIT or GPL licenses.
 * http://appendto.com/open-source-licenses
 *
 * http://amplifyjs.com
 */
(function(a,g){JSON.stringify=JSON.stringify||JSON.encode;JSON.parse=JSON.parse||JSON.decode;var b=a.store=function(h,j,e,i){var i=b.type;if(e&&e.type&&e.type in b.types){i=e.type}return b.types[i](h,j,e||{})};b.types={};b.type=null;b.addType=function(e,h){if(!b.type){b.type=e}b.types[e]=h;b[e]=function(j,k,i){i=i||{};i.type=e;return b(j,k,i)}};b.error=function(){return"amplify.store quota exceeded"};function d(h,i){var e=i.__amplify__?JSON.parse(i.__amplify__):{};b.addType(h,function(o,p,n){var m=p,l=(new Date()).getTime(),q,j;if(!o){m={};for(o in e){q=i[o];j=q?JSON.parse(q):{expires:-1};if(j.expires&&j.expires<=l){delete i[o];delete e[o]}else{m[o.replace(/^__amplify__/,"")]=j.data}}i.__amplify__=JSON.stringify(e);return m}o="__amplify__"+o;if(p===g){if(e[o]){q=i[o];j=q?JSON.parse(q):{expires:-1};if(j.expires&&j.expires<=l){delete i[o];delete e[o]}else{return j.data}}}else{if(p===null){delete i[o];delete e[o]}else{j=JSON.stringify({data:p,expires:n.expires?l+n.expires:null});try{i[o]=j;e[o]=true}catch(k){b[h]();try{i[o]=j;e[o]=true}catch(k){throw b.error()}}}}i.__amplify__=JSON.stringify(e);return m})}for(var c in {localStorage:1,sessionStorage:1}){try{if(window[c].getItem){d(c,window[c])}}catch(f){}}if(window.globalStorage){d("globalStorage",window.globalStorage[window.location.hostname]);if(b.type==="sessionStorage"){b.type="globalStorage"}}(function(){var i=document.createElement("div"),h="amplify",e;i.style.display="none";document.getElementsByTagName("head")[0].appendChild(i);if(i.addBehavior){i.addBehavior("#default#userdata");i.load(h);e=i.getAttribute(h)?JSON.parse(i.getAttribute(h)):{};b.addType("userData",function(q,p,r){var l=p,j=(new Date()).getTime(),m,o,k;if(!q){l={};for(q in e){m=i.getAttribute(q);o=m?JSON.parse(m):{expires:-1};if(o.expires&&o.expires<=j){i.removeAttribute(q);delete e[q]}else{l[q]=o.data}}i.setAttribute(h,JSON.stringify(e));i.save(h);return l}q=q.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-");if(p===g){if(q in e){m=i.getAttribute(q);o=m?JSON.parse(m):{expires:-1};if(o.expires&&o.expires<=j){i.removeAttribute(q);delete e[q]}else{return o.data}}}else{if(p===null){i.removeAttribute(q);delete e[q]}else{k=i.getAttribute(q);o=JSON.stringify({data:p,expires:(r.expires?(j+r.expires):null)});i.setAttribute(q,o);e[q]=true}}i.setAttribute(h,JSON.stringify(e));try{i.save(h)}catch(n){if(k===null){i.removeAttribute(q);delete e[q]}else{i.setAttribute(q,k)}b.userData();try{i.setAttribute(q,o);e[q]=true;i.save(h)}catch(n){if(k===null){i.removeAttribute(q);delete e[q]}else{i.setAttribute(q,k)}throw b.error()}}return l})}}());d("memory",{})}(this.amplify=this.amplify||{}));var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;
function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(h,b){var e=h.console||b,i=h.document,k=h.navigator,a=h.amplify||false,d=h.setTimeout,j=h.clearTimeout,f=h.setInterval,l=h.JSON,c=h.History=h.History||{},g=h.history;l.stringify=l.stringify||l.encode;l.parse=l.parse||l.decode;if(typeof c.init!=="undefined"){throw new Error("History.js Core has already been loaded...")}c.init=function(){if(typeof c.Adapter==="undefined"){return false}if(typeof c.initCore!=="undefined"){c.initCore()}if(typeof c.initHtml4!=="undefined"){c.initHtml4()}return true};c.initCore=function(){if(typeof c.initCore.initialized!=="undefined"){return false}else{c.initCore.initialized=true}c.options=c.options||{};c.options.hashChangeInterval=c.options.hashChangeInterval||100;c.options.safariPollInterval=c.options.safariPollInterval||500;c.options.doubleCheckInterval=c.options.doubleCheckInterval||500;c.options.storeInterval=c.options.storeInterval||1000;c.options.busyDelay=c.options.busyDelay||250;c.options.debug=c.options.debug||false;c.options.initialTitle=c.options.initialTitle||i.title;c.debug=function(){if((c.options.debug||false)){c.log.apply(c,arguments)}};c.log=function(){var u=!(typeof e==="undefined"||typeof e.log==="undefined"||typeof e.log.apply==="undefined"),p=i.getElementById("log"),t,s,v;if(u){var q=Array.prototype.slice.call(arguments);t=q.shift();if(typeof e.debug!=="undefined"){e.debug.apply(e,[t,q])}else{e.log.apply(e,[t,q])}}else{t=("\n"+arguments[0]+"\n")}for(s=1,v=arguments.length;s<v;++s){var o=arguments[s];
if(typeof o==="object"&&typeof l!=="undefined"){try{o=l.stringify(o)}catch(r){}}t+="\n"+o+"\n"}if(p){p.value+=t+"\n-----\n";p.scrollTop=p.scrollHeight-p.clientHeight}else{if(!u){alert(t)}}return true};c.getInternetExplorerMajorVersion=function(){var n=c.getInternetExplorerMajorVersion.cached=(typeof c.getInternetExplorerMajorVersion.cached!=="undefined")?c.getInternetExplorerMajorVersion.cached:(function(){var o=3,q=i.createElement("div"),p=q.getElementsByTagName("i");while((q.innerHTML="<!--[if gt IE "+(++o)+"]><i></i><![endif]-->")&&p[0]){}return(o>4)?o:false})();return n};c.isInternetExplorer=function(){var n=c.isInternetExplorer.cached=(typeof c.isInternetExplorer.cached!=="undefined")?c.isInternetExplorer.cached:Boolean(c.getInternetExplorerMajorVersion());return n};c.emulated={pushState:!Boolean(h.history&&h.history.pushState&&h.history.replaceState&&!((/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i).test(k.userAgent)||(/AppleWebKit\/5([0-2]|3[0-2])/i).test(k.userAgent))),hashChange:Boolean(!(("onhashchange" in h)||("onhashchange" in i))||(c.isInternetExplorer()&&c.getInternetExplorerMajorVersion()<8))};c.enabled=!c.emulated.pushState;c.bugs={setHash:Boolean(!c.emulated.pushState&&k.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(k.userAgent)),safariPoll:Boolean(!c.emulated.pushState&&k.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(k.userAgent)),ieDoubleCheck:Boolean(c.isInternetExplorer()&&c.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(c.isInternetExplorer()&&c.getInternetExplorerMajorVersion()<7)};c.isEmptyObject=function(o){for(var n in o){return false}return true};c.cloneObject=function(p){var o,n;if(p){o=l.stringify(p);n=l.parse(o)}else{n={}}return n};c.getRootUrl=function(){var n=i.location.protocol+"//"+(i.location.hostname||i.location.host);if(i.location.port||false){n+=":"+i.location.port}n+="/";return n};c.getBaseHref=function(){var n=i.getElementsByTagName("base"),p=null,o="";if(n.length===1){p=n[0];o=p.href.replace(/[^\/]+$/,"")}o=o.replace(/\/+$/,"");if(o){o+="/"}return o};c.getBaseUrl=function(){var n=c.getBaseHref()||c.getBasePageUrl()||c.getRootUrl();return n};c.getPageUrl=function(){var n=c.getState(false,false),p=(n||{}).url||i.location.href;var o=p.replace(/\/+$/,"").replace(/[^\/]+$/,function(s,r,q){return(/\./).test(s)?s:s+"/"});return o};c.getBasePageUrl=function(){var n=i.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(q,p,o){return(/[^\/]$/).test(q)?"":q}).replace(/\/+$/,"")+"/";return n};c.getFullUrl=function(o,q){var n=o,p=o.substring(0,1);q=(typeof q==="undefined")?true:q;if(/[a-z]+\:\/\//.test(o)){}else{if(p==="/"){n=c.getRootUrl()+o.replace(/^\/+/,"")}else{if(p==="#"){n=c.getPageUrl().replace(/#.*/,"")+o}else{if(p==="?"){n=c.getPageUrl().replace(/[\?#].*/,"")+o}else{if(q){n=c.getBaseUrl()+o.replace(/^(\.\/)+/,"")}else{n=c.getBasePageUrl()+o.replace(/^(\.\/)+/,"")}}}}}return n.replace(/\#$/,"")};c.getShortUrl=function(p){var o=p,q=c.getBaseUrl(),n=c.getRootUrl();if(c.emulated.pushState){o=o.replace(q,"")}o=o.replace(n,"/");if(c.isTraditionalAnchor(o)){o="./"+o}o=o.replace(/^(\.\/)+/g,"./").replace(/\#$/,"");return o};c.store=a?(a.store("History.store")||{}):{};c.store.idToState=c.store.idToState||{};c.store.urlToId=c.store.urlToId||{};c.store.stateToId=c.store.stateToId||{};c.idToState=c.idToState||{};c.stateToId=c.stateToId||{};c.urlToId=c.urlToId||{};c.storedStates=c.storedStates||[];c.savedStates=c.savedStates||[];c.getState=function(p,o){if(typeof p==="undefined"){p=true}if(typeof o==="undefined"){o=true}var n=c.getLastSavedState();if(!n&&o){n=c.createStateObject()}if(p){n=c.cloneObject(n);n.url=n.cleanUrl||n.url}return n};c.getIdByState=function(n){var p=c.extractId(n.url);if(!p){var o=c.getStateString(n);if(typeof c.stateToId[o]!=="undefined"){p=c.stateToId[o]}else{if(typeof c.store.stateToId[o]!=="undefined"){p=c.store.stateToId[o]}else{while(true){p=String(Math.floor(Math.random()*1000));if(typeof c.idToState[p]==="undefined"&&typeof c.store.idToState[p]==="undefined"){break
}}c.stateToId[o]=p;c.idToState[p]=n}}}return p};c.normalizeState=function(o){if(!o||(typeof o!=="object")){o={}}if(typeof o.normalized!=="undefined"){return o}if(!o.data||(typeof o.data!=="object")){o.data={}}var p={};p.normalized=true;p.title=o.title||"";p.url=c.getFullUrl(c.unescapeString(o.url||i.location.href));p.hash=c.getShortUrl(p.url);p.data=c.cloneObject(o.data);p.id=c.getIdByState(p);p.cleanUrl=p.url.replace(/\??\&_suid.*/,"");p.url=p.cleanUrl;var n=!c.isEmptyObject(p.data);if(p.title||n){p.hash=c.getShortUrl(p.url).replace(/\??\&_suid.*/,"");if(!/\?/.test(p.hash)){p.hash+="?"}p.hash+="&_suid="+p.id}p.hashedUrl=c.getFullUrl(p.hash);if((c.emulated.pushState||c.bugs.safariPoll)&&c.hasUrlDuplicate(p)){p.url=p.hashedUrl}return p};c.createStateObject=function(p,q,o){var n={data:p,title:q,url:o};n=c.normalizeState(n);return n};c.getStateById=function(o){o=String(o);var n=c.idToState[o]||c.store.idToState[o]||b;return n};c.getStateString=function(o){var n=c.normalizeState(o);var p={data:n.data,title:o.title,url:o.url};var q=l.stringify(p);return q};c.getStateId=function(o){var n=c.normalizeState(o);var p=n.id;return p};c.getHashByState=function(o){var p,n=c.normalizeState(o);p=n.hash;return p};c.extractId=function(p){var q;var o,n;o=/(.*)\&_suid=([0-9]+)$/.exec(p);n=o?(o[1]||p):p;q=o?String(o[2]||""):"";return q||false};c.isTraditionalAnchor=function(o){var n=!(/[\/\?\.]/.test(o));return n};c.extractState=function(q,p){var n=null;p=p||false;var r=c.extractId(q);if(r){n=c.getStateById(r)}if(!n){var o=c.getFullUrl(q);r=c.getIdByUrl(o)||false;if(r){n=c.getStateById(r)}if(!n&&p&&!c.isTraditionalAnchor(q)){n=c.createStateObject(null,null,o)}}return n};c.getIdByUrl=function(n){var o=c.urlToId[n]||c.store.urlToId[n]||b;return o};c.getLastSavedState=function(){return c.savedStates[c.savedStates.length-1]||b};c.getLastStoredState=function(){return c.storedStates[c.storedStates.length-1]||b};c.hasUrlDuplicate=function(p){var o=false;var n=c.extractState(p.url);o=n&&n.id!==p.id;return o};c.storeState=function(n){c.urlToId[n.url]=n.id;c.storedStates.push(c.cloneObject(n));return n};c.isLastSavedState=function(q){var p=false;if(c.savedStates.length){var o=q.id,n=c.getLastSavedState(),r=n.id;p=(o===r)}return p};c.saveState=function(n){if(c.isLastSavedState(n)){return false}c.savedStates.push(c.cloneObject(n));return true};c.getStateByIndex=function(o){var n=null;if(typeof o==="undefined"){n=c.savedStates[c.savedStates.length-1]}else{if(o<0){n=c.savedStates[c.savedStates.length+o]}else{n=c.savedStates[o]}}return n};c.getHash=function(){var n=c.unescapeHash(i.location.hash);return n};c.unescapeString=function(p){var n=p;var o;while(true){o=h.unescape(n);if(o===n){break}n=o}return n};c.unescapeHash=function(o){var n=c.normalizeHash(o);n=c.unescapeString(n);return n};c.normalizeHash=function(o){var n=o.replace(/[^#]*#/,"").replace(/#.*/,"");return n};c.setHash=function(r,o){if(o!==false&&c.busy()){c.pushQueue({scope:c,callback:c.setHash,args:arguments,queue:o});return false}var n=c.escapeHash(r);c.busy(true);var p=c.extractState(r,true);if(p&&!c.emulated.pushState){c.pushState(p.data,p.title,p.url,false)}else{if(i.location.hash!==n){if(c.bugs.setHash){var q=c.getPageUrl();c.pushState(null,null,q+"#"+n,false)}else{i.location.hash=n}}}return c};c.escapeHash=function(o){var n=c.normalizeHash(o);n=h.escape(n);if(!c.bugs.hashEscape){n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")}return n};c.getHashByUrl=function(n){var o=String(n).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");o=c.unescapeHash(o);return o};c.setTitle=function(p){var q=p.title;if(!q){var o=c.getStateByIndex(0);if(o&&o.url===p.url){q=o.title||c.options.initialTitle}}try{i.getElementsByTagName("title")[0].innerHTML=q.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(n){}i.title=q;return c};c.queues=[];c.busy=function(o){if(typeof o!=="undefined"){c.busy.flag=o}else{if(typeof c.busy.flag==="undefined"){c.busy.flag=false}}if(!c.busy.flag){j(c.busy.timeout);
var n=function(){if(c.busy.flag){return}for(var q=c.queues.length-1;q>=0;--q){var p=c.queues[q];if(p.length===0){continue}var r=p.shift();c.fireQueueItem(r);c.busy.timeout=d(n,c.options.busyDelay)}};c.busy.timeout=d(n,c.options.busyDelay)}return c.busy.flag};c.fireQueueItem=function(n){return n.callback.apply(n.scope||c,n.args||[])};c.pushQueue=function(n){c.queues[n.queue||0]=c.queues[n.queue||0]||[];c.queues[n.queue||0].push(n);return c};c.queue=function(o,n){if(typeof o==="function"){o={callback:o}}if(typeof n!=="undefined"){o.queue=n}if(c.busy()){c.pushQueue(o)}else{c.fireQueueItem(o)}return c};c.clearQueue=function(){c.busy.flag=false;c.queues=[];return c};c.stateChanged=false;c.doubleChecker=false;c.doubleCheckComplete=function(){c.stateChanged=true;c.doubleCheckClear();return c};c.doubleCheckClear=function(){if(c.doubleChecker){j(c.doubleChecker);c.doubleChecker=false}return c};c.doubleCheck=function(n){c.stateChanged=false;c.doubleCheckClear();if(c.bugs.ieDoubleCheck){c.doubleChecker=d(function(){c.doubleCheckClear();if(!c.stateChanged){n()}return true},c.options.doubleCheckInterval)}return c};c.safariStatePoll=function(){var o=c.extractState(i.location.href),n;if(!c.isLastSavedState(o)){n=o}else{return}if(!n){n=c.createStateObject()}c.Adapter.trigger(h,"popstate");return c};c.back=function(n){if(n!==false&&c.busy()){c.pushQueue({scope:c,callback:c.back,args:arguments,queue:n});return false}c.busy(true);c.doubleCheck(function(){c.back(false)});g.go(-1);return true};c.forward=function(n){if(n!==false&&c.busy()){c.pushQueue({scope:c,callback:c.forward,args:arguments,queue:n});return false}c.busy(true);c.doubleCheck(function(){c.forward(false)});g.go(1);return true};c.go=function(o,n){var p;if(o>0){for(p=1;p<=o;++p){c.forward(n)}}else{if(o<0){for(p=-1;p>=o;--p){c.back(n)}}else{throw new Error("History.go: History.go requires a positive or negative integer passed.")}}return c};c.saveState(c.storeState(c.extractState(i.location.href,true)));if(a){c.onUnload=function(){var n=a.store("History.store")||{},o;n.idToState=n.idToState||{};n.urlToId=n.urlToId||{};n.stateToId=n.stateToId||{};for(o in c.idToState){if(!c.idToState.hasOwnProperty(o)){continue}n.idToState[o]=c.idToState[o]}for(o in c.urlToId){if(!c.urlToId.hasOwnProperty(o)){continue}n.urlToId[o]=c.urlToId[o]}for(o in c.stateToId){if(!c.stateToId.hasOwnProperty(o)){continue}n.stateToId[o]=c.stateToId[o]}c.store=n;a.store("History.store",n)};f(c.onUnload,c.options.storeInterval);c.Adapter.bind(h,"beforeunload",c.onUnload);c.Adapter.bind(h,"unload",c.onUnload)}if(c.emulated.pushState){var m=function(){};c.pushState=c.pushState||m;c.replaceState=c.replaceState||m}else{c.onPopState=function(p){c.doubleCheckComplete();var o=c.getHash();if(o){var n=c.extractState(o||i.location.href,true);if(n){c.replaceState(n.data,n.title,n.url,false)}else{c.Adapter.trigger(h,"anchorchange");c.busy(false)}c.expectedStateId=false;return false}var q=false;p=p||{};if(typeof p.state==="undefined"){if(typeof p.originalEvent!=="undefined"&&typeof p.originalEvent.state!=="undefined"){p.state=p.originalEvent.state||false}else{if(typeof p.event!=="undefined"&&typeof p.event.state!=="undefined"){p.state=p.event.state||false}}}p.state=(p.state||false);if(p.state){q=c.getStateById(p.state)}else{if(c.expectedStateId){q=c.getStateById(c.expectedStateId)}else{q=c.extractState(i.location.href)}}if(!q){q=c.createStateObject(null,null,i.location.href)}c.expectedStateId=false;if(c.isLastSavedState(q)){c.busy(false);return false}c.storeState(q);c.saveState(q);c.setTitle(q);c.Adapter.trigger(h,"statechange");c.busy(false);return true};c.Adapter.bind(h,"popstate",c.onPopState);c.pushState=function(p,r,o,n){if(c.getHashByUrl(o)&&c.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(n!==false&&c.busy()){c.pushQueue({scope:c,callback:c.pushState,args:arguments,queue:n});return false}c.busy(true);var q=c.createStateObject(p,r,o);if(c.isLastSavedState(q)){c.busy(false)
}else{c.storeState(q);c.expectedStateId=q.id;g.pushState(q.id,q.title,q.url);c.Adapter.trigger(h,"popstate")}return true};c.replaceState=function(p,r,o,n){if(c.getHashByUrl(o)&&c.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(n!==false&&c.busy()){c.pushQueue({scope:c,callback:c.replaceState,args:arguments,queue:n});return false}c.busy(true);var q=c.createStateObject(p,r,o);if(c.isLastSavedState(q)){c.busy(false)}else{c.storeState(q);c.expectedStateId=q.id;g.replaceState(q.id,q.title,q.url);c.Adapter.trigger(h,"popstate")}return true};if(c.bugs.safariPoll){f(c.safariStatePoll,c.options.safariPollInterval)}if(k.vendor==="Apple Computer, Inc."||(k.appCodeName||"")==="Mozilla"){c.Adapter.bind(h,"hashchange",function(){c.Adapter.trigger(h,"popstate")});if(c.getHash()){c.Adapter.onDomLoad(function(){c.Adapter.trigger(h,"hashchange")})}}}};c.init()})(window);(function(d,g){var a=d.document,e=d.setTimeout||e,f=d.clearTimeout||f,b=d.setInterval||b,c=d.History=d.History||{};if(typeof c.initHtml4!=="undefined"){throw new Error("History.js HTML4 Support has already been loaded...")}c.initHtml4=function(){if(typeof c.initHtml4.initialized!=="undefined"){return false}else{c.initHtml4.initialized=true}c.enabled=true;c.savedHashes=[];c.isLastHash=function(h){var j=c.getHashByIndex();var i=h===j;return i};c.saveHash=function(h){if(c.isLastHash(h)){return false}c.savedHashes.push(h);return true};c.getHashByIndex=function(h){var i=null;if(typeof h==="undefined"){i=c.savedHashes[c.savedHashes.length-1]}else{if(h<0){i=c.savedHashes[c.savedHashes.length+h]}else{i=c.savedHashes[h]}}return i};c.discardedHashes={};c.discardedStates={};c.discardState=function(l,h,k){var i=c.getHashByState(l);var j={discardedState:l,backState:k,forwardState:h};c.discardedStates[i]=j;return true};c.discardHash=function(i,h,k){var j={discardedHash:i,backState:k,forwardState:h};c.discardedHashes[i]=j;return true};c.discardedState=function(h){var j=c.getHashByState(h);var i=c.discardedStates[j]||false;return i};c.discardedHash=function(i){var h=c.discardedHashes[i]||false;return h};c.recycleState=function(h){var i=c.getHashByState(h);if(c.discardedState(h)){delete c.discardedStates[i]}return true};if(c.emulated.hashChange){c.hashChangeInit=function(){c.checkerFunction=null;var h="";if(c.isInternetExplorer()){var l="historyjs-iframe",i=a.createElement("iframe");i.setAttribute("id",l);i.style.display="none";a.body.appendChild(i);i.contentWindow.document.open();i.contentWindow.document.close();var j="",k=false;c.checkerFunction=function(){if(k){return false}k=true;var n=c.getHash()||"",m=c.unescapeHash(i.contentWindow.document.location.hash)||"";if(n!==h){h=n;if(m!==n){j=m=n;i.contentWindow.document.open();i.contentWindow.document.close();i.contentWindow.document.location.hash=c.escapeHash(n)}c.Adapter.trigger(d,"hashchange")}else{if(m!==j){j=m;c.setHash(m,false)}}k=false;return true}}else{c.checkerFunction=function(){var m=c.getHash();if(m!==h){h=m;c.Adapter.trigger(d,"hashchange")}return true}}b(c.checkerFunction,c.options.hashChangeInterval);return true};c.Adapter.onDomLoad(c.hashChangeInit)}if(c.emulated.pushState){c.onHashChange=function(l){var m=((l&&l.newURL)||a.location.href),k=c.getHashByUrl(m),j=null,h=null,n=null;if(c.isLastHash(k)){c.busy(false);return false}c.doubleCheckComplete();c.saveHash(k);if(k&&c.isTraditionalAnchor(k)){c.Adapter.trigger(d,"anchorchange");c.busy(false);return false}j=c.extractState(c.getFullUrl(k||a.location.href,false),true);if(c.isLastSavedState(j)){c.busy(false);return false}h=c.getHashByState(j);var i=c.discardedState(j);if(i){if(c.getHashByIndex(-2)===c.getHashByState(i.forwardState)){c.back(false)}else{c.forward(false)}return false}c.pushState(j.data,j.title,j.url,false);return true};c.Adapter.bind(d,"hashchange",c.onHashChange);c.pushState=function(l,p,h,n){if(c.getHashByUrl(h)){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")
}if(n!==false&&c.busy()){c.pushQueue({scope:c,callback:c.pushState,args:arguments,queue:n});return false}c.busy(true);var k=c.createStateObject(l,p,h),i=c.getHashByState(k),j=c.getState(false),m=c.getHashByState(j),o=c.getHash();c.storeState(k);c.expectedStateId=k.id;c.recycleState(k);c.setTitle(k);if(i===m){c.busy(false);return false}if(i!==o&&i!==c.getShortUrl(a.location.href)){c.setHash(i,false);return false}c.saveState(k);c.Adapter.trigger(d,"statechange");c.busy(false);return true};c.replaceState=function(l,n,k,h){if(c.getHashByUrl(k)){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(h!==false&&c.busy()){c.pushQueue({scope:c,callback:c.replaceState,args:arguments,queue:h});return false}c.busy(true);var m=c.createStateObject(l,n,k),j=c.getState(false),i=c.getStateByIndex(-2);c.discardState(j,m,i);c.pushState(m.data,m.title,m.url,false);return true};if(c.getHash()&&!c.emulated.hashChange){c.Adapter.onDomLoad(function(){c.Adapter.trigger(d,"hashchange")})}}};c.init()})(window);(function(b,d){var a=b.History=b.History||{},c=b.jQuery;if(typeof a.Adapter!=="undefined"){throw new Error("History.js Adapter has already been loaded...")}a.Adapter={bind:function(e,f,g){c(e).bind(f,g)},trigger:function(f,g,e){c(f).trigger(g,e)},extractEventData:function(g,h,f){var e=(h&&h.originalEvent&&h.originalEvent[g])||(f&&f[g])||d;return e},onDomLoad:function(e){c(e)}};if(typeof a.init!=="undefined"){a.init()}})(window);(function(a,b){$(function(){$("pre.latex").each(function(h){var f=$(this).text();var g="http://chart.apis.google.com/chart?cht=tx&chl="+encodeURIComponent(f);var c=$(this).attr("class");var d='<img src="'+g+'" alt="'+f+'" class="'+c+'"/>';$(d).insertBefore($(this));$(this).hide()})})})(window);